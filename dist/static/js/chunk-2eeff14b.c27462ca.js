(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2eeff14b"],{"02f4":function(e,t,r){var n=r("4588"),a=r("be13");e.exports=function(e){return function(t,r){var i,o,s=String(a(t)),l=n(r),u=s.length;return l<0||l>=u?e?"":void 0:(i=s.charCodeAt(l))<55296||i>56319||l+1===u||(o=s.charCodeAt(l+1))<56320||o>57343?e?s.charAt(l):i:e?s.slice(l,l+2):o-56320+(i-55296<<10)+65536}}},"0390":function(e,t,r){"use strict";var n=r("02f4")(!0);e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},"0bfb":function(e,t,r){"use strict";var n=r("cb7c");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"1c70":function(e,t,r){"use strict";r.r(t);var n=r("eaa3"),a=(r("ca72"),r("f88c")),i=(r("4ec3"),r("cebe")),o=r.n(i),s={components:{tinymce:a.a,SelectTree:n.a},computed:{categoryTreeData:function(){return this.$store.state.categoryTreeData},ruleForm:function(){return this.$store.state.goodsListRow}},data:function(){return{dialog:{dialogVisible:"false",dialogMsg:""},defaultProps:{parent:"parentId",value:"id",label:"label",children:"children"},content:"",msg:"",imgList:[],rules:{goodsName:[{required:!0,message:"请输入商品名称",trigger:"blur"}]},imageUrl:"",dialogImageUrl:"",options:[{value:"羽素",label:"羽素"},{value:"纽崔莱恩",label:"纽崔莱恩"}],stepStatus:1,flag:""}},methods:{handleRemove:function(e){},handlePreview:function(e){},onClick:function(){},submitForm:function(){var e=this;this.ruleForm.imageText=this.msg,this.ruleForm.bannerPicture=this.imageUrl,this.ruleForm.listPicture=this.imgList;var t="";this.ruleForm.price=parseInt(this.ruleForm.price),this.ruleForm.inventory=parseInt(this.ruleForm.inventory),t="add"===this.flag?"http://tadmin.yuxinhz.cn/api/product/add":"http://tadmin.yuxinhz.cn/api/product/update",o.a.post(t,this.ruleForm).then((function(t){e.$message({message:"add"===e.flag?"添加商品成功":"编辑商品成功",type:"success"}),e.$router.push({path:"/goodsList?pageNum="+("add"===e.flag?1:e.$route.query.pageNum)})})).catch((function(e){}))},resetForm:function(e){this.$refs[e].resetFields()},submitUpload:function(e){var t=new FormData;t.append("file",e.file);var r=this;o.a.post("http://192.168.1.161:8102/fileUpload",t,{"Content-Type":"multipart/form-data"}).then((function(e){r.imageUrl=e.data.obj.url})).catch((function(e){}))},submitUploadMul:function(e){var t=new FormData;t.append("file",e.file);var r=this;o.a.post("http://192.168.1.161:8102/fileUpload",t,{"Content-Type":"multipart/form-data"}).then((function(e){r.imgList.push(e.data.obj)})).catch((function(e){}))},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,r=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG/png 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&r},getValue:function(e){this.valueId=e},step_click:function(e){this.stepStatus=e},stepTo:function(){1===this.stepStatus?this.stepStatus++:this.stepStatus--},getTreeCategory:function(){var e=this;o.a.get("http://tadmin.yuxinhz.cn/api/category/getTreeCategory",{}).then((function(t){e.$store.commit("categoryTreeData",t.data.obj.categoryList)})).catch((function(e){}))}},mounted:function(){this.getTreeCategory(),this.flag=this.$route.query.flag}},l=(r("61d7"),r("2877")),u=Object(l.a)(s,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"onion-add-goods"},[r("el-card",{staticClass:"box-card"},[r("el-steps",{staticStyle:{"margin-top":"20px"},attrs:{active:e.stepStatus,"finish-status":"success",simple:""}},[r("el-step",{attrs:{title:"1.编辑基本信息"},nativeOn:{click:function(t){return e.step_click(1)}}}),r("el-step",{attrs:{title:"2.编辑商品详情"},nativeOn:{click:function(t){return e.step_click(2)}}})],1),r("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{model:e.ruleForm,rules:e.rules}},[r("section",{directives:[{name:"show",rawName:"v-show",value:1===e.stepStatus,expression:"stepStatus === 1"}]},[r("p",[r("span",[e._v("基本信息")])]),r("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入商品名称"},model:{value:e.ruleForm.suppliesName,callback:function(t){e.$set(e.ruleForm,"suppliesName",t)},expression:"ruleForm.suppliesName"}})],1),r("el-form-item",{attrs:{label:"简介"}},[r("el-input",{attrs:{placeholder:"请输入简介",type:"textarea"},model:{value:e.ruleForm.intro,callback:function(t){e.$set(e.ruleForm,"intro",t)},expression:"ruleForm.intro"}})],1),r("el-form-item",{attrs:{label:"商品缩略图"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","http-request":e.submitUpload,"show-file-list":!1,limit:1,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?r("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",{attrs:{label:"商品品牌"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.brand,callback:function(t){e.$set(e.ruleForm,"brand",t)},expression:"ruleForm.brand"}},e._l(e.options,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"商品类目"}},[r("SelectTree",{attrs:{options:e.categoryTreeData,props:e.defaultProps},model:{value:e.ruleForm.categoryId,callback:function(t){e.$set(e.ruleForm,"categoryId",t)},expression:"ruleForm.categoryId"}})],1),r("el-form-item",{attrs:{label:"商品展示图"}},[r("el-upload",{staticClass:"upload-demo",attrs:{action:"","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.imgList,"http-request":e.submitUploadMul,"list-type":"picture"}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),r("p",[r("span",[e._v("价格库存")])]),r("el-form-item",{attrs:{label:"售价"}},[r("el-input",{attrs:{type:"number",placeholder:"请输入售价"},model:{value:e.ruleForm.price,callback:function(t){e.$set(e.ruleForm,"price",t)},expression:"ruleForm.price"}})],1),r("el-form-item",{attrs:{label:"库存"}},[r("el-input",{attrs:{type:"number",placeholder:"请输入库存"},model:{value:e.ruleForm.inventory,callback:function(t){e.$set(e.ruleForm,"inventory",t)},expression:"ruleForm.inventory"}})],1),r("el-form-item",{attrs:{label:"规格"}},[r("el-input",{attrs:{placeholder:"请输入规格"},model:{value:e.ruleForm.specification,callback:function(t){e.$set(e.ruleForm,"specification",t)},expression:"ruleForm.specification"}})],1)],1),2===e.stepStatus?r("section",[r("tinymce",{ref:"editor",on:{onClick:e.onClick},model:{value:e.msg,callback:function(t){e.msg=t},expression:"msg"}})],1):e._e(),r("el-form-item",[r("el-button",{domProps:{textContent:e._s(1===e.stepStatus?"下一步":"上一步")},on:{click:e.stepTo}}),r("el-button",{directives:[{name:"show",rawName:"v-show",value:2===e.stepStatus,expression:"stepStatus === 2"}],attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=u.exports},"214f":function(e,t,r){"use strict";r("b0c5");var n=r("2aba"),a=r("32e9"),i=r("79e5"),o=r("be13"),s=r("2b4c"),l=r("520a"),u=s("species"),c=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),p=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();e.exports=function(e,t,r){var f=s(e),d=!i((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),h=d?!i((function(){var t=!1,r=/a/;return r.exec=function(){return t=!0,null},"split"===e&&(r.constructor={},r.constructor[u]=function(){return r}),r[f](""),!t})):void 0;if(!d||!h||"replace"===e&&!c||"split"===e&&!p){var m=/./[f],v=r(o,f,""[e],(function(e,t,r,n,a){return t.exec===l?d&&!a?{done:!0,value:m.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}})),g=v[0],b=v[1];n(String.prototype,e,g),a(RegExp.prototype,f,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}}},"23c6":function(e,t,r){var n=r("2d95"),a=r("2b4c")("toStringTag"),i="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,r,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),a))?r:i?n(t):"Object"==(o=n(t))&&"function"==typeof t.callee?"Arguments":o}},"4ec3":function(e,t,r){"use strict";r("a481"),r("6762"),r("2fdb");var n=r("cebe"),a=r.n(n),i=r("9883"),o=r("07a4");function s(e,t){return new Promise((function(r,n){a.a.get(e,{params:t}).then((function(e){r(e)})).catch((function(e){n(e)}))}))}function l(e,t){return new Promise((function(r,n){a.a.post(e,t).then((function(e){r(e)})).catch((function(e){n(e)}))}))}a.a.defaults.timeout=6e4,a.a.defaults.baseURL="http://tadmin.yuxinhz.cn",a.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",a.a.interceptors.request.use((function(e){return o.a.state.token,e}),(function(e){return Promise.reject(e)})),a.a.interceptors.response.use((function(e){return new Promise((function(t,r){var n=e.data;200===n.code&&"success"===n.message?t(n):r(n)}))}),(function(e){if(e.response){switch(e.response.status){case 500:case 404:break;case 401:o.a.state.commit("COMMIT_TOKEN",""),setTimeout((function(){i.a.replace({path:"/login",query:{redirect:i.a.currentRoute.fullPath}})}),1e3)}return Promise.reject(e)}e.message.includes("timeout")})),r.d(t,"b",(function(){return u})),r.d(t,"a",(function(){return c})),r.d(t,"c",(function(){return p})),r.d(t,"d",(function(){return f}));var u=function(e){return s("/api/product/list",e)},c=function(e){return l("/api/product/delete",e)},p=function(e){return l("/api/product/putaway",e)},f=function(e){return l("/api/product/soldOut",e)}},"520a":function(e,t,r){"use strict";var n,a,i=r("0bfb"),o=RegExp.prototype.exec,s=String.prototype.replace,l=o,u=(n=/a/,a=/b*/g,o.call(n,"a"),o.call(a,"a"),0!==n.lastIndex||0!==a.lastIndex),c=void 0!==/()??/.exec("")[1];(u||c)&&(l=function(e){var t,r,n,a,l=this;return c&&(r=new RegExp("^"+l.source+"$(?!\\s)",i.call(l))),u&&(t=l.lastIndex),n=o.call(l,e),u&&n&&(l.lastIndex=l.global?n.index+n[0].length:t),c&&n&&n.length>1&&s.call(n[0],r,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(n[a]=void 0)})),n}),e.exports=l},"5f1b":function(e,t,r){"use strict";var n=r("23c6"),a=RegExp.prototype.exec;e.exports=function(e,t){var r=e.exec;if("function"==typeof r){var i=r.call(e,t);if("object"!=typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(e))throw new TypeError("RegExp#exec called on incompatible receiver");return a.call(e,t)}},"61d7":function(e,t,r){"use strict";var n=r("c2c8");r.n(n).a},"9fb6":function(e,t,r){},a481:function(e,t,r){"use strict";var n=r("cb7c"),a=r("4bf8"),i=r("9def"),o=r("4588"),s=r("0390"),l=r("5f1b"),u=Math.max,c=Math.min,p=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g;r("214f")("replace",2,(function(e,t,r,h){return[function(n,a){var i=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,a):r.call(String(i),n,a)},function(e,t){var a=h(r,e,this,t);if(a.done)return a.value;var p=n(e),f=String(this),d="function"==typeof t;d||(t=String(t));var v=p.global;if(v){var g=p.unicode;p.lastIndex=0}for(var b=[];;){var y=l(p,f);if(null===y)break;if(b.push(y),!v)break;""===String(y[0])&&(p.lastIndex=s(f,i(p.lastIndex),g))}for(var x,w="",F=0,k=0;k<b.length;k++){y=b[k];for(var S=String(y[0]),T=u(c(o(y.index),f.length),0),$=[],C=1;C<y.length;C++)$.push(void 0===(x=y[C])?x:String(x));var M=y.groups;if(d){var P=[S].concat($,T,f);void 0!==M&&P.push(M);var _=String(t.apply(void 0,P))}else _=m(S,f,T,$,M,t);T>=F&&(w+=f.slice(F,T)+_,F=T+S.length)}return w+f.slice(F)}];function m(e,t,n,i,o,s){var l=n+e.length,u=i.length,c=d;return void 0!==o&&(o=a(o),c=f),r.call(s,c,(function(r,a){var s;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(l);case"<":s=o[a.slice(1,-1)];break;default:var c=+a;if(0===c)return r;if(c>u){var f=p(c/10);return 0===f?r:f<=u?void 0===i[f-1]?a.charAt(1):i[f-1]+a.charAt(1):r}s=i[c-1]}return void 0===s?"":s}))}}))},b0c5:function(e,t,r){"use strict";var n=r("520a");r("5ca1")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},c2c8:function(e,t,r){},cd41:function(e,t,r){"use strict";var n=r("9fb6");r.n(n).a},eaa3:function(e,t,r){"use strict";var n={name:"Pagination",props:{value:String,width:String,options:{type:Array,required:!0},props:{type:Object,required:!1,default:function(){return{parent:"parentId",value:"rowGuid",label:"areaName",children:"children"}}}},model:{prop:"value",event:"selected"},computed:{dataType:function(){return-1!==JSON.stringify(this.options).indexOf(this.props.children)},data:function(){return this.dataType?this.options:this.switchTree()}},watch:{labelModel:function(e){e||(this.valueModel=""),this.$refs.tree.filter(e)},value:function(e){this.labelModel=this.queryTree(this.data,e)}},data:function(){return{showStatus:!1,treeWidth:"auto",labelModel:"",valueModel:"0"}},created:function(){var e=this;this.value&&(this.labelModel=this.queryTree(this.data,this.value)),this.$nextTick((function(){e.treeWidth="".concat((e.width||e.$refs.input.$refs.input.clientWidth)-24,"px")}))},methods:{onClickNode:function(e){this.labelModel=e[this.props.label],this.valueModel=e[this.props.value],this.onCloseTree()},switchTree:function(){return this.cleanChildren(this.buildTree(this.options,"0"))},onCloseTree:function(){this.$refs.popover.showPopper=!1},onShowPopover:function(){this.showStatus=!0,this.$refs.tree.filter(!1)},onHidePopover:function(){this.showStatus=!1,this.$emit("selected",this.valueModel)},filterNode:function(e,t){return!e||-1!==t[this.props.label].indexOf(e)},queryTree:function(e,t){var r=[];for(r=r.concat(e);r.length;){var n=r.shift();if(n[this.props.children]&&(r=r.concat(n[this.props.children])),n[this.props.value]===t)return n[this.props.label]}return""},buildTree:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",n=function r(n){for(var a=[],i=0;i<e.length;i++){var o=e[i];o[t.props.parent]===n&&(o.children=r(o.rowGuid),a.push(o))}return a};return n(r)},cleanChildren:function(e){return function e(t){return t.map((function(t){return t.children.length?e(t.children):delete t.children,t})),t}(e)}}},a=(r("cd41"),r("2877")),i=Object(a.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-popover",{ref:"popover",attrs:{placement:"bottom-start",trigger:"click"},on:{show:e.onShowPopover,hide:e.onHidePopover}},[r("el-tree",{ref:"tree",staticClass:"select-tree",style:"min-width: "+e.treeWidth,attrs:{"highlight-current":"",data:e.data,props:e.props,"expand-on-click-node":!1,"filter-node-method":e.filterNode,"default-expand-all":!1},on:{"node-click":e.onClickNode}}),r("el-input",{ref:"input",class:{rotate:e.showStatus},style:"width: "+e.width+"px",attrs:{slot:"reference",clearable:"","suffix-icon":"el-icon-arrow-down"},slot:"reference",model:{value:e.labelModel,callback:function(t){e.labelModel=t},expression:"labelModel"}})],1)}),[],!1,null,null,null);t.a=i.exports}}]);